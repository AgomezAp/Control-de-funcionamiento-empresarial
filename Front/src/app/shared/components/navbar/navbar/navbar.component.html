<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo Section -->
    <div class="navbar-brand">
      <a routerLink="/dashboard" class="brand-link">
        <div class="brand-icon">
          <i class="pi pi-box"></i>
        </div>
        <span class="brand-text">Gesti√≥n Peticiones</span>
      </a>
    </div>

    <!-- Search Section -->
    <div class="navbar-search">
      <div class="search-wrapper">
        <i class="pi pi-search search-icon"></i>
        <input
          type="text"
          placeholder="Buscar... (Ctrl+K)"
          class="search-input"
        />
        <span class="search-shortcut">Ctrl+K</span>
      </div>
    </div>

    <!-- Actions Section -->
    <div class="navbar-actions">
      <!-- Theme Toggle -->
      <button
        pButton
        type="button"
        [icon]="(isDarkMode$ | async) ? 'pi pi-sun' : 'pi pi-moon'"
        class="action-btn theme-btn"
        (click)="toggleTheme()"
        [pTooltip]="(isDarkMode$ | async) ? 'Modo Claro' : 'Modo Oscuro'"
        tooltipPosition="bottom"
      ></button>

      <!-- Notifications -->
      <div class="notification-wrapper">
        <button
          pButton
          type="button"
          icon="pi pi-bell"
          class="action-btn notification-btn"
          (click)="openNotifications()"
          pTooltip="Notificaciones"
          tooltipPosition="bottom"
        ></button>
        <span
          *ngIf="(unreadCount$ | async) && (unreadCount$ | async)! > 0"
          class="notification-badge"
        >
          {{ (unreadCount$ | async)! > 99 ? "99+" : (unreadCount$ | async) }}
        </span>
      </div>

      <!-- User Menu -->
      <div class="user-menu" (click)="menu.toggle($event)">
        <div class="user-avatar">
          <span class="avatar-text">{{
            currentUser?.nombre_completo | initials
          }}</span>
        </div>
        <div class="user-info">
          <span class="user-name">{{ currentUser?.nombre_completo }}</span>
          <span class="user-role">{{ currentUser?.rol || "Usuario" }}</span>
        </div>
        <i class="pi pi-chevron-down dropdown-icon"></i>
      </div>

      <p-menu
        #menu
        [model]="userMenuItems"
        [popup]="true"
        styleClass="user-dropdown-menu"
      ></p-menu>
    </div>
  </div>
</nav>
