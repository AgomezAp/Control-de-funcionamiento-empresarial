<div class="auth-container">
  <div class="auth-card">
    <!-- Header compacto -->
    <div class="auth-header">
      <i class="pi pi-box logo-icon"></i>
      <h1>Sistema de Gestión de Peticiones</h1>
    </div>

    <p-card>
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <!-- Email -->
        <div class="form-group">
          <label for="correo">Correo electrónico</label>
          <span class="p-input-icon-left">
            <i class="pi pi-envelope"></i>
            <input
              id="correo"
              type="email"
              pInputText
              formControlName="correo"
              placeholder="correo@ejemplo.com"
              [class.ng-invalid]="
                hasError('correo', 'required') || hasError('correo', 'email')
              "
            />
          </span>
          <small
            class="p-error"
            *ngIf="
              hasError('correo', 'required') || hasError('correo', 'email')
            "
          >
            {{
              hasError("correo", "required")
                ? "El correo es requerido"
                : "Ingresa un correo válido"
            }}
          </small>
        </div>

        <!-- Password con estructura corregida -->
        <div class="form-group">
          <label for="contrasena">Contraseña</label>
          <div class="password-wrapper">
            <i class="pi pi-lock password-icon-left"></i>
            <p-password
              id="contrasena"
              formControlName="contrasena"
              placeholder="••••••••"
              [toggleMask]="true"
              [feedback]="false"
              inputStyleClass="password-input-custom"
              [class.ng-invalid]="
                hasError('contrasena', 'required') ||
                hasError('contrasena', 'minlength')
              "
            ></p-password>
          </div>
          <small
            class="p-error"
            *ngIf="
              hasError('contrasena', 'required') ||
              hasError('contrasena', 'minlength')
            "
          >
            {{
              hasError("contrasena", "required")
                ? "La contraseña es requerida"
                : "Mínimo 6 caracteres"
            }}
          </small>
        </div>

        <!-- Remember & Forgot en una línea -->
        <div class="form-options">
          <p-checkbox
            formControlName="recordar"
            label="Recordarme"
            [binary]="true"
          ></p-checkbox>
          <a routerLink="/auth/recuperar-password" class="forgot-link">
            ¿Olvidaste tu contraseña?
          </a>
        </div>

        <!-- Submit Button -->
        <button
          pButton
          type="submit"
          label="Iniciar Sesión"
          icon="pi pi-sign-in"
          class="submit-btn"
          [loading]="loading"
          [disabled]="loginForm.invalid || loading"
        ></button>

        <!-- Register Link -->
        <div class="register-link">
          ¿No tienes cuenta?
          <a routerLink="/auth/registro">Regístrate aquí</a>
        </div>
      </form>
    </p-card>
  </div>
</div>
