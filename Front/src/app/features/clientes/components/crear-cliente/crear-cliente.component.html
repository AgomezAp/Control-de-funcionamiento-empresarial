<div class="crear-cliente-page">
  <!-- HEADER -->
  <div class="page-header">
    <h1 class="page-title">
      <i class="pi pi-user-plus"></i>
      Crear Nuevo Cliente
    </h1>
  </div>

  <!-- BOTÓN VOLVER -->
  <button type="button" class="back-link" (click)="volver()">
    <i class="pi pi-arrow-left"></i>
    Volver
  </button>

  <!-- FORMULARIO -->
  <form [formGroup]="clienteForm" (ngSubmit)="onSubmit()" class="cliente-form">
    <div class="form-grid">
      <!-- NOMBRE DEL CLIENTE -->
      <div class="form-group full-width">
        <label for="nombre" class="form-label">
          Nombre del Cliente
          <span class="required">*</span>
        </label>
        <small class="form-hint">Ej: Coca-Cola Colombia</small>
        <input
          type="text"
          id="nombre"
          formControlName="nombre"
          class="form-control"
          placeholder="Ingrese el nombre del cliente"
          [class.error]="
            clienteForm.get('nombre')?.invalid &&
            clienteForm.get('nombre')?.touched
          "
        />
        <small
          *ngIf="
            clienteForm.get('nombre')?.invalid &&
            clienteForm.get('nombre')?.touched
          "
          class="form-error"
        >
          El nombre es requerido (mínimo 3 caracteres)
        </small>
      </div>

      <!-- PAÍS -->
      <div class="form-group">
        <label for="pais" class="form-label">
          País
          <span class="required">*</span>
        </label>
        <small class="form-hint">Seleccione un país</small>
        <div class="select-wrapper">
          <select
            id="pais"
            formControlName="pais"
            class="form-control form-select"
            [class.error]="
              clienteForm.get('pais')?.invalid &&
              clienteForm.get('pais')?.touched
            "
          >
            <option value="" disabled selected>Seleccione un país</option>
            <option *ngFor="let pais of paises" [value]="pais.codigo">
              {{ pais.nombre }}
            </option>
          </select>
          <i class="pi pi-chevron-down select-icon"></i>
        </div>
        <small
          *ngIf="
            clienteForm.get('pais')?.invalid && clienteForm.get('pais')?.touched
          "
          class="form-error"
        >
          El país es requerido
        </small>
      </div>

      <!-- TIPO DE CLIENTE -->
      <div class="form-group">
        <label for="tipo_cliente" class="form-label">
          Tipo de Cliente
          <span class="required">*</span>
        </label>
        <small class="form-hint">Seleccione el tipo de cliente</small>
        <div class="select-wrapper">
          <select
            id="tipo_cliente"
            formControlName="tipo_cliente"
            class="form-control form-select"
            [class.error]="
              clienteForm.get('tipo_cliente')?.invalid &&
              clienteForm.get('tipo_cliente')?.touched
            "
          >
            <option value="" disabled selected>Seleccione un tipo</option>
            <option *ngFor="let tipo of tiposCliente" [value]="tipo.value">
              {{ tipo.label }}
            </option>
          </select>
          <i class="pi pi-chevron-down select-icon"></i>
        </div>
        <small
          *ngIf="
            clienteForm.get('tipo_cliente')?.invalid && 
            clienteForm.get('tipo_cliente')?.touched
          "
          class="form-error"
        >
          El tipo de cliente es requerido
        </small>
      </div>

      <!-- PAUTADOR -->
      <div class="form-group">
        <label for="pautador" class="form-label">
          Pautador
          <span class="required">*</span>
        </label>
        <small class="form-hint">Seleccione un pautador</small>
        <div class="select-wrapper">
          <select
            id="pautador"
            formControlName="pautador_id"
            class="form-control form-select"
            [class.error]="
              clienteForm.get('pautador_id')?.invalid &&
              clienteForm.get('pautador_id')?.touched
            "
          >
            <option value="" disabled selected>Seleccione un pautador</option>
            <option *ngFor="let pautador of pautadores" [value]="pautador.uid">
              {{ pautador.nombre_completo }} - {{ pautador.correo }}
            </option>
          </select>
          <i class="pi pi-chevron-down select-icon"></i>
        </div>
        <small
          *ngIf="
            clienteForm.get('pautador_id')?.invalid &&
            clienteForm.get('pautador_id')?.touched
          "
          class="form-error"
        >
          El pautador es requerido
        </small>
      </div>

      <!-- DISEÑADOR -->
      <div class="form-group">
        <label for="disenador" class="form-label">
          Diseñador
          <span class="optional">(Opcional)</span>
        </label>
        <small class="form-hint">Seleccione un diseñador</small>
        <div class="select-wrapper">
          <select
            id="disenador"
            formControlName="disenador_id"
            class="form-control form-select"
          >
            <option value="">Sin diseñador asignado</option>
            <option
              *ngFor="let disenador of disenadores"
              [value]="disenador.uid"
            >
              {{ disenador.nombre_completo }} - {{ disenador.correo }}
            </option>
          </select>
          <i class="pi pi-chevron-down select-icon"></i>
        </div>
      </div>

      <!-- FECHA DE INICIO -->
      <div class="form-group">
        <label for="fecha_inicio" class="form-label">
          Fecha de Inicio
          <span class="required">*</span>
        </label>
        <small class="form-hint">Seleccione una fecha</small>
        <div class="date-wrapper">
          <input
            type="date"
            id="fecha_inicio"
            formControlName="fecha_inicio"
            class="form-control form-date"
            [class.error]="
              clienteForm.get('fecha_inicio')?.invalid &&
              clienteForm.get('fecha_inicio')?.touched
            "
          />
          <i class="pi pi-calendar date-icon"></i>
        </div>
        <small
          *ngIf="
            clienteForm.get('fecha_inicio')?.invalid &&
            clienteForm.get('fecha_inicio')?.touched
          "
          class="form-error"
        >
          La fecha de inicio es requerida
        </small>
      </div>
    </div>

    <!-- BOTONES DE ACCIÓN -->
    <div class="form-actions">
      <button
        type="button"
        class="btn btn-secondary"
        (click)="volver()"
        [disabled]="loading"
      >
        <i class="pi pi-times"></i>
        <span>Cancelar</span>
      </button>
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="clienteForm.invalid || loading"
      >
        <i class="pi pi-save" *ngIf="!loading"></i>
        <i class="pi pi-spin pi-spinner" *ngIf="loading"></i>
        <span>{{ loading ? "Guardando..." : "Crear Cliente" }}</span>
      </button>
    </div>
  </form>
</div>
