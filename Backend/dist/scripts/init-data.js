"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const connection_1 = __importDefault(require("../database/connection"));
const Role_1 = __importDefault(require("../models/Role"));
const Area_1 = __importDefault(require("../models/Area"));
const Categoria_1 = __importDefault(require("../models/Categoria"));
require("../models/Relaciones"); // Importar relaciones
function initData() {
    return __awaiter(this, void 0, void 0, function* () {
        try {
            yield connection_1.default.authenticate();
            console.log("‚úÖ Conectado a la base de datos");
            // Sincronizar modelos
            yield connection_1.default.sync({ alter: false }); // force: true elimina tablas existentes
            console.log("‚úÖ Tablas sincronizadas");
            // Crear roles
            console.log("üìù Creando roles...");
            const roles = [
                { nombre: "Admin", descripcion: "Acceso total al sistema" },
                { nombre: "Directivo", descripcion: "Gesti√≥n de su √°rea" },
                { nombre: "L√≠der", descripcion: "Supervisi√≥n de equipo" },
                { nombre: "Usuario", descripcion: "Usuario est√°ndar" },
            ];
            for (const rol of roles) {
                yield Role_1.default.findOrCreate({
                    where: { nombre: rol.nombre },
                    defaults: rol,
                });
            }
            console.log("‚úÖ Roles creados");
            // Crear √°reas
            console.log("üìù Creando √°reas...");
            const areas = [
                { nombre: "Gesti√≥n Administrativa", descripcion: "√Årea administrativa" },
                { nombre: "Pautas", descripcion: "Gesti√≥n de pautas publicitarias" },
                { nombre: "Dise√±o", descripcion: "Dise√±o gr√°fico y web" },
                { nombre: "Contabilidad", descripcion: "Gesti√≥n contable" },
                { nombre: "Programaci√≥n", descripcion: "Desarrollo de software" },
            ];
            for (const area of areas) {
                yield Area_1.default.findOrCreate({
                    where: { nombre: area.nombre },
                    defaults: area,
                });
            }
            console.log("‚úÖ √Åreas creadas");
            // Crear categor√≠as de Dise√±o
            console.log("üìù Creando categor√≠as de Dise√±o...");
            const categoriasDise√±o = [
                {
                    nombre: "Creaci√≥n de subpesta√±a",
                    area_tipo: "Dise√±o",
                    costo: 66000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Ajuste de copy",
                    area_tipo: "Dise√±o",
                    costo: 64000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Cambio de copy",
                    area_tipo: "Dise√±o",
                    costo: 128000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Fase 1 (color y tipograf√≠a)",
                    area_tipo: "Dise√±o",
                    costo: 104000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Fase 2 (diagramaci√≥n e im√°genes)",
                    area_tipo: "Dise√±o",
                    costo: 144000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Fase 3 (Redise√±o)",
                    area_tipo: "Dise√±o",
                    costo: 288000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Ajuste de dise√±o",
                    area_tipo: "Dise√±o",
                    costo: 80000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Migraci√≥n",
                    area_tipo: "Dise√±o",
                    costo: 64000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Creaci√≥n de sitio web",
                    area_tipo: "Dise√±o",
                    costo: 600000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Cambio de n√∫mero",
                    area_tipo: "Dise√±o",
                    costo: 10000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Cambio de nombre",
                    area_tipo: "Dise√±o",
                    costo: 85000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Modelado 3D",
                    area_tipo: "Dise√±o",
                    costo: 0,
                    es_variable: true,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Creaci√≥n de pieza publicitaria",
                    area_tipo: "Dise√±o",
                    costo: 30000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Ajuste de pieza publicitaria",
                    area_tipo: "Dise√±o",
                    costo: 15000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Copia de seguridad",
                    area_tipo: "Dise√±o",
                    costo: 20000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Barrido por dise√±o",
                    area_tipo: "Dise√±o",
                    costo: 15000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Limpieza de cach√©",
                    area_tipo: "Dise√±o",
                    costo: 5000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Descarga de im√°genes",
                    area_tipo: "Dise√±o",
                    costo: 32000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
            ];
            for (const cat of categoriasDise√±o) {
                yield Categoria_1.default.findOrCreate({
                    where: { nombre: cat.nombre },
                    defaults: cat,
                });
            }
            // Crear categor√≠as de Pautas
            console.log("üìù Creando categor√≠as de Pautas...");
            const categoriasPautas = [
                {
                    nombre: "Barrido web (revisi√≥n)",
                    area_tipo: "Pautas",
                    costo: 7000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Barrido Ads (revisi√≥n)",
                    area_tipo: "Pautas",
                    costo: 7000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Creaci√≥n de campa√±a",
                    area_tipo: "Pautas",
                    costo: 90000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Ajuste de campa√±a",
                    area_tipo: "Pautas",
                    costo: 36000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Palabras Clave (ajustes)",
                    area_tipo: "Pautas",
                    costo: 36000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Palabras clave (Barrido)",
                    area_tipo: "Pautas",
                    costo: 18000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Estrategias de seguimiento",
                    area_tipo: "Pautas",
                    costo: 72000,
                    es_variable: false,
                    requiere_descripcion_extra: true,
                },
                {
                    nombre: "Ajuste de presupuesto",
                    area_tipo: "Pautas",
                    costo: 72000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Creaci√≥n de anuncio",
                    area_tipo: "Pautas",
                    costo: 72000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Ajuste de anuncio",
                    area_tipo: "Pautas",
                    costo: 36000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Etiquetas de conversi√≥n",
                    area_tipo: "Pautas",
                    costo: 18000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Verificaci√≥n de anunciante",
                    area_tipo: "Pautas",
                    costo: 18000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
                {
                    nombre: "Apelaci√≥n",
                    area_tipo: "Pautas",
                    costo: 18000,
                    es_variable: false,
                    requiere_descripcion_extra: false,
                },
            ];
            for (const cat of categoriasPautas) {
                yield Categoria_1.default.findOrCreate({
                    where: { nombre: cat.nombre },
                    defaults: cat,
                });
            }
            console.log("‚úÖ Categor√≠as creadas");
            console.log("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ");
            console.log("‚úÖ Datos iniciales cargados correctamente");
            console.log("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ");
            console.log("");
            console.log("üìä Resumen:");
            console.log(`   - ${roles.length} Roles`);
            console.log(`   - ${areas.length} √Åreas`);
            console.log(`   - ${categoriasDise√±o.length} Categor√≠as de Dise√±o`);
            console.log(`   - ${categoriasPautas.length} Categor√≠as de Pautas`);
            console.log("");
            console.log("üéâ ¬°Listo! Ya puedes empezar a usar la aplicaci√≥n");
            process.exit(0);
        }
        catch (error) {
            console.error("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ");
            console.error("‚ùå Error al inicializar datos:");
            console.error(error);
            console.error("‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ");
            process.exit(1);
        }
    });
}
// Ejecutar funci√≥n
initData();
